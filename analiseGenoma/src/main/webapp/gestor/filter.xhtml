<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.org/ui"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:pt="http://xmlns.jcp.org/jsf/passthrough">

    <body>

        <ui:composition template="./template.xhtml">

            <ui:define name="content">
                <h:form id="formulario" >
                    <p:growl />
                    <p:panel header="Filter" >
                        <p:panel  rendered="#{filterMB.showFilds}">
                            <p:panelGrid columns="2" styleClass="ui-noborder"   >
                                <p:panel><h:outputLabel value="Name" for="name"/></p:panel>
                                <p:panel><p:inputText value="#{filterSB.filter.name}" id="name"
                                                      pt:placeholder="Enter an name for this filter"
                                                      validator="#{filterMB.validateName}"/>
                                </p:panel>
                                
                                <p:panel><h:outputLabel value="Select gene from analyze's disease" for="geneAnalyse"/></p:panel>
                                <p:panel><p:selectBooleanCheckbox id="geneAnalyse" value="#{filterSB.filter.geneAnalyse}" />
                                    
                                </p:panel>

                                
                                <p:panel><h:outputLabel value="Filter by Gene" for="bygene"/></p:panel>
                                <p:panel><p:selectBooleanCheckbox id="bygene" value="#{filterSB.filter.byGene}" >
                                        <p:ajax update="geneLbl geneInput" listener="#{filterMB.loadGenes}" />
                                    </p:selectBooleanCheckbox>
                                </p:panel>

                                <p:panel id="geneLbl">
                                    <h:outputLabel value="Select the genes" rendered="#{filterSB.filter.byGene}" id="selectGeneLbl" for="selectGeneInput"/>
                                </p:panel>
                                <p:panel id="geneInput">
                                    <p:autoComplete value="#{filterMB.selectedGenes}" completeMethod="#{filterMB.completeGene}" 
                                                    var="gene"  itemLabel="#{gene.symbol}" itemValue="#{gene}"
                                                    rendered="#{filterSB.filter.byGene}" forceSelection="true"
                                                    effect="fade" multiple="true" converter="#{geneConverter}" id="selectGeneInput"
                                                    validator="#{filterMB.validateGenes}"/>
                                </p:panel>

                                <p:panel><h:outputLabel value="Filter by Chromosome" for="byChromosome"/></p:panel>
                                <p:panel><p:selectBooleanCheckbox id="byChromosome" value="#{filterMB.byChromosome}" >
                                        <p:ajax update="chromosomeLbl chromosomeInput" listener="#{filterMB.loadChromosome()}" />
                                    </p:selectBooleanCheckbox>
                                </p:panel>

                                <p:panel id="chromosomeLbl"><p:outputLabel value="Chromosome" for="selectChromosome" rendered="#{filterMB.byChromosome}"/></p:panel>
                                <p:panel id="chromosomeInput">
                                    <p:autoComplete value="#{filterMB.selectedChromosome}" completeMethod="#{filterMB.completeChromosome}" 
                                                    var="chr"  itemLabel="#{chr.nome}" itemValue="#{chr}"
                                                    forceSelection="true"
                                                    effect="fade" multiple="true" converter="#{chromosomeConverter}" id="selectChromosome"
                                                    rendered="#{filterMB.byChromosome}" />

                                </p:panel>

                                <p:panel><h:outputLabel value="Filter by Position" for="byPosition"/></p:panel>
                                <p:panel><p:selectBooleanCheckbox id="byPosition" value="#{filterSB.filter.byPosition}" >
                                        <p:ajax update="positionLbl positionInput" />
                                    </p:selectBooleanCheckbox>
                                </p:panel>

                                <p:panel id="positionLbl"><p:outputLabel value="Position" rendered="#{filterSB.filter.byPosition}"/></p:panel>
                                <p:panel id="positionInput"  >
                                    <p:outputLabel value="Min" rendered="#{filterSB.filter.byPosition}"/> 
                                    <p:inputText value="#{filterSB.filter.positionMin}" rendered="#{filterSB.filter.byPosition}" pt:placeholder="Enter the minimum value"/>

                                    <p:outputLabel value="Max" rendered="#{filterSB.filter.byPosition}"/> 
                                    <p:inputText value="#{filterSB.filter.positionMax}" rendered="#{filterSB.filter.byPosition}" pt:placeholder="Enter the max value"/>
                                </p:panel>
                                
                                
                                <p:panel><h:outputLabel value="Filter by Reference" for="byReference"/></p:panel>
                                <p:panel><p:selectBooleanCheckbox id="byReference" value="#{filterSB.filter.byReference}" >
                                        <p:ajax update="referenceLbl referenceInput" />
                                    </p:selectBooleanCheckbox>
                                </p:panel>                                
                                <p:panel id="referenceLbl"><p:outputLabel value="Reference" for="selectReference" rendered="#{filterSB.filter.byReference}"/></p:panel>
                                <p:panel id="referenceInput">
                                    <p:autoComplete value="#{filterSB.filter.referencias}" completeMethod="#{filterMB.completeReference}" 
                                                    var="ref"  itemLabel="#{ref}" itemValue="#{ref}"
                                                    forceSelection="true"
                                                    effect="fade" multiple="true"  id="selectReference"
                                                    rendered="#{filterSB.filter.byReference}" />
                                </p:panel>
                                
                                
                                
                                
                                                                
                                
                                
                                
                                

                            </p:panelGrid>


                        </p:panel>

                        <p:panelGrid columns="4" layout="grid" styleClass="ui-panelgrid-blank">
                            <p:commandButton value="New" actionListener="#{filterMB.add}" update="formulario" rendered="#{filterMB.crudModeRead}"/>
                            <p:commandButton value="Save" actionListener="#{filterMB.save}" update="formulario" rendered="#{filterMB.crudModeUpdate}"/>
                            <p:commandButton value="Cancel" actionListener="#{filterMB.cancel}" update="formulario"/>

                        </p:panelGrid>
                    </p:panel>                
                </h:form>
            </ui:define>

        </ui:composition>

    </body>
</html>
